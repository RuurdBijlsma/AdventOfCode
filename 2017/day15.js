function* Generate(startValue, factor, modValue = 1) {
    while (true) {
        do {
            startValue *= factor;
            startValue %= 2147483647;
        } while (startValue % modValue !== 0);
        yield startValue & 0xFFFF;
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////// PART 1 //////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

part1 = () => {
    a = Generate(516, 16807);
    b = Generate(190, 48271);

    sum = 0;
    for (let i = 0; i < 40000000; i++)
        if (a.next().value === b.next().value)
            sum++;

    return sum;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////// PART 2 //////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

part2 = () => {
    a = Generate(516, 16807, 4);
    b = Generate(190, 48271, 8);

    sum = 0;
    for (let i = 0; i < 5000000; i++)
        if (a.next().value === b.next().value)
            sum++;

    return sum;
}